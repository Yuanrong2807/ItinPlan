<template name="planner">
	<div class="container-fluid plannerControl">

		<!-- Alert -->
		<div class="alert alert-success alert-dismissible fade show" role="alert" id="newTripAlert">
			<h4 class="alert-heading">Welcome to your new trip itinerary!</h4>
			<p>Hi there! Start planning your future vacation.</p>
			<button type="button" class="close" data-dismiss="alert" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			<hr>
			<p class="mb-0">Some advice here etc.</p>
		</div>

		<!-- Trip Name -->
		<h2 class="text-center">My Trip</h2>

		<!-- Control Panel for trip -->
		<div class="row p-3">
			<div class="col">
				<div class="card">

					<div class="card-body m-3">
						<!-- For members, allow save -->
						{{#if checkLoginAndData}}
							<button class="btn btn-success btn-saveTrip float-right">Save Trip</button>
						{{/if}}
						<!-- Trip statistics -->
						<h5 class="card-title">ID: {{tripId}}</h5>
						<h5 class="card-title">Start Date: {{tripStartDate}}</h5>
						<h5 class="card-title">Days: {{tripDays.length}}</h5>
						<hr>
						<button class="btn btn-primary btn-openSettings" data-toggle="modal" data-target="#settingsModal">Edit settings</button>
					</div>

				</div>
			</div>
		</div>
		<div class="w-100"></div>

	</div>

	<!--contain the trip planner itself-->
	{{#if haveTrip}}
		<div class="container-fluid planner">
			<!--{{createTrip "Mexico"}}-->
			<!-- add stuff like days and start date etc
			<label>{{tripCountry}}</label>
			-->

			<!--this is the control panel-->
			
			<!--keep trip stored in local storage constantly-->
				{{localStorageTrip}}

				{{# each day in tripDays}}
					{{> dayTemplate dayIndex=@index day=day trip=reactiveTrip}}
				{{/each}}

				<!-- for the new day button -->
				<div class="row align-items-center p-3">
					<div class="btn btn-danger btn-addDay">Add Day</div>
				</div>
				<div class="w-100"></div>
			
		</div>
	{{else}}
		<div class="container d-flex justify-content-center">
			<div id="html-spinner"></div>
		</div>
	{{/if}}

	<!--this is for the control panel editing stuff-->
	<div class="modal fade" id="settingsModal" tabindex="-1" role="dialog" aria-labelledby="modal display" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLabel">My Trip settings:</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<div class="container pr-1 pl-1">
					<form>
						<!--add form controls here-->
						<!-- from https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/date -->
						<div class="form-row p-1">
							<label for="dayNumbers" class="col-3 col-form-label">Start Date:</label>
							<div class="col-3">
								<input type="number" class="form-control" id="dateDay" placeholder="Day" min=1 max=365>
							</div>
							<div class="col-4">
								<select class="form-control" id="dateMonth" placeholder="Month">
									<option selected>January</option>
									<option>February</option>
									<option>March</option>
									<option>April</option>
									<option>May</option>
									<option>June</option>
									<option>July</option>
									<option>August</option>
									<option>September</option>
									<option>October</option>
									<option>November</option>
									<option>December</option>
								</select>
							</div>
							<div class="col-2">
								<select class="form-control" id="dateYear" placeholder="Year">
									<option selected>2018</option>
									<option>2018</option>
									<option>2018</option>
									<option>2018</option>
									<option>2018</option>
									<option>2018</option>
									<option>2018</option>
									<option>2018</option>
									<option>2018</option>
									<option>2018</option>
									<option>2018</option>
									<option>2018</option>
								</select>
							</div>
							
						</div>

						<div class="form-row p-1">
							<label for="dayNumbers" class="col col-form-label">Number of days:</label>
							<div class="col-2">
								<input type="number" class="form-control" id="dayNumbers" placeholder="# of days" min="1" max="365">
							</div>
						</div>

						

						

					</form>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary btn-saveSettings" data-dismiss="modal">Save</button>
			</div>
			</div>
		</div>
	</div>
	
	<!--modal for opening location @yuanrong javascript must be in planner template-->
	<div class="modal fade" id="locationModal" tabindex="-1" role="dialog" aria-labelledby="modal display" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLabel">Select Location:</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<form>
					<input type="text" class="form-control" id="recipient-name">
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary btn-saveLoc" data-dismiss="modal">Save</button>
			</div>
			</div>
		</div>
	</div>
	
</template>

<template name="dayTemplate">
	<div class="row align-items-center p-3">
		<!--for each day, there is a day button and locations within the day template.-->
		<div class="card border-primary m-1 mr-4 text-center" style="width: 8rem;">
			<div class="card-body">
				<p class="card-text mt-2">Day {{getDayNum dayIndex}}</p>
				<div class="btn btn-danger btn-dayRemoveDay mb-2">Delete</div>
			</div>
		</div>

		{{# each location in day}}
			{{> locationTemplate dayIndex=dayIndex locIndex=@index location=location trip=trip}}
		{{/each}}
		<div class="btn btn-danger btn-dayAddLoc ml-4">Add Location</div>
	</div>
	<div class="w-100"></div>
</template>

<template name="locationTemplate">
	<div class="card border-primary m-1" style="width: 12rem;">
			<img class="card-img-top planner m-1 border border-dark">
			<div class="card-body">
				<h6 class="card-title">{{location}} {{getLocNum locIndex}}</h6>
				<p class="card-text">Yolo.</p>
	
				<button class="btn btn-danger btn-deleteLoc float-left m-1">
					<span aria-hidden="true">&times;</span>
				</button>
				
				<button class="btn btn-success btn-selectLoc float-right m-1" data-toggle="modal" data-target="#locationModal" data-location={{location}}>Select Location</button>
			</div>
	</div>
</template>


